@page "/create/envanter"

<EditForm Model="envanter" OnValidSubmit="Create">
    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="inputEmail4">Name</label>
            <InputText @bind-Value=envanter.Name class="form-control" placeholder="Name" />
        </div>
        <div class="form-group col-md-6">
            <label for="inputPassword4">ENVCode</label>
            <InputText @bind-Value=envanter.ENVCode class="form-control" placeholder="Envanter Code" />
        </div>
    </div>
    <div class="form-group">
        <label for="inputAddress">StockQuantity</label>
        <InputNumber @bind-Value=envanter.StockQuantity class="form-control" id="inputAddress" />
    </div>
    <div class="form-group">
        <select class="form-select" aria-label="Default select example">
            @foreach(var brand in brands)
            {
                <option>@brand</option>
            }   
        </select>
    </div>

   
    <button type="submit" class="btn btn-primary">Sign in</button>
</EditForm>
@code {
    [Inject]
    NavigationManager navigationManager { get; set; }

    [Inject]
    IEnvanterService envanterService { get; set; }

    [Inject]
    ILocalStorageService localStorage { get; set; }

    [Inject]
    BrandService brandService { get; set; }

    List<GetBrandsViewModel> brands;

    CreateEnvanterCommand envanter = new();

    protected override async Task OnInitializedAsync()
    {
        brands = await brandService.GetAll();
    }
    public async Task Create()
    {
        envanter.CompanyId =await localStorage.GetCompanyId();
        await envanterService.Create(envanter);
    }
}
